<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>R package providing a framework for easy access, processing, and advanced visualization of gridded climate products • CAVAanalytics</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R package providing a framework for easy access, processing, and advanced visualization of gridded climate products">
<meta name="description" content="CAVAanalytics is a comprehensive framework for climate data analysis, offering streamlined access to data, advanced processing and visualization capabilities. It is designed to support a wide range of climate research and user needs">
<meta property="og:description" content="CAVAanalytics is a comprehensive framework for climate data analysis, offering streamlined access to data, advanced processing and visualization capabilities. It is designed to support a wide range of climate research and user needs">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">CAVAanalytics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/CAVA.html"><span class="fa fas fa-cloud-sun-rain"></span> CAVA vs other tools</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="articles/more_advanced.html">Climate indexes</a></li>
    <li><a class="dropdown-item" href="articles/large_areas.html">Computation over large regions</a></li>
    <li><a class="dropdown-item" href="articles/own_data.html">CAVAanalytics and CMIP6 models</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Risk-team/CAVAanalytics/"><span class="fa fa-github fa-lg"></span> GitHub</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html"><span class="fa fas fa-history"></span> Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header"><h1 align="center">
<img src="reference/figures/sticker2.png" width="300" height="300" align="center"><br><h5 align="center">
R package providing a framework for easy access, processing, and advanced visualization of gridded climate products
</h5>
<br><div align="center">
<p><img src="https://img.shields.io/github/r-package/v/Risk-Team/CAVAanalytics" alt="GitHub R package version" style="display: inline-block;"><img src="https://img.shields.io/github/release-date-pre/Risk-team/CAVAanalytics" alt="release date" style="display: inline-block;"><a href="https://zenodo.org/doi/10.5281/zenodo.11127220" class="external-link"><img src="https://zenodo.org/badge/558266668.svg" alt="DOI"></a> <a href="http://hits.dwyl.com/Risk-team/CAVAanalytics" class="external-link"><img src="http://hits.dwyl.com/Risk-team/CAVAanalytics.svg"></a></p>
</div>
</h1></div>
<table class="table">
<colgroup><col width="100%"></colgroup>
<tbody>
<tr>
<td align="left"><strong>Check GitHub issues for known servers’ downtimes</strong></td>
</tr>
<tr>
<td align="left"><strong>We will release Bias corrected CORDEX-CORE simulations with the ISIMIP methodology in 2025 as part of a CAVA update</strong></td>
</tr>
</tbody>
</table>
<p><a href="https://risk-team.github.io/CAVAanalytics/"><strong>CAVAanalytics</strong></a> is a comprehensive R package designed to simplify and enhance climate data analysis. It offers a unified framework that streamlines access to datasets such as W5E5, ERA5, and CORDEX-CORE models, facilitating efficient loading, analysis, indicator calculation, and visualization of climate and impact model data</p>
<div class="section level3">
<h3 id="key-features">Key Features:<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h3>
<ul>
<li>
<strong>Simplified Data Access:</strong> Retrieve CORDEX-CORE models globally without the need to manage netCDF files. Data requests are sent to THREDDS servers, allowing you to access only the necessary information directly in memory.</li>
<li>
<strong>Consistent Analytical Framework:</strong> Work seamlessly with multiple climate models, making indicator calculation and result visualization straightforward and efficient.</li>
</ul>
</div>
<div class="section level3">
<h3 id="quick-example">Quick example<a class="anchor" aria-label="anchor" href="#quick-example"></a>
</h3>
<p>Below is an example of how to use CAVAanalytics to retrieve and analyze climate information for Sudan, covering both historical and projected data. Detailed examples are available from the <a href="https://risk-team.github.io/CAVAanalytics/articles/Introduction.html">tutorial webpage</a>.</p>
<p>This script retrieves precipitation data for Sudan from 1990 to 2000 (historical) and 2020 to 2030 (projected), analyzes the climate change signal, and visualizes the projected change in total annual precipitation compared to the 1990-2000 baseline period.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://risk-team.github.io/CAVAanalytics/">CAVAanalytics</a></span><span class="op">)</span></span>
<span><span class="co"># 1st step</span></span>
<span> <span class="va">remote.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/load_data.html">load_data</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"Sudan"</span>, variable<span class="op">=</span><span class="st">"pr"</span>,</span>
<span> years.hist<span class="op">=</span><span class="fl">1990</span><span class="op">:</span><span class="fl">2000</span>, years.proj<span class="op">=</span><span class="fl">2020</span><span class="op">:</span><span class="fl">2030</span>,</span>
<span> path.to.data <span class="op">=</span> <span class="st">"CORDEX-CORE"</span>, aggr.m<span class="op">=</span><span class="st">"sum"</span>, domain<span class="op">=</span><span class="st">"AFR-22"</span><span class="op">)</span></span>
<span><span class="co"># 2nd step</span></span>
<span><span class="va">sudan_ccs</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/climate_change_signal.html">climate_change_signal</a></span><span class="op">(</span><span class="va">remote.data</span>, season<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>, bias.correction <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co"># 3rd step</span></span>
<span> <span class="fu"><a href="reference/plotting.html">plotting</a></span><span class="op">(</span><span class="va">sudan_ccs</span>, ensemble<span class="op">=</span><span class="cn">FALSE</span>, plot_titles <span class="op">=</span> <span class="st">"Precipitation change (mm)"</span>,</span>
<span> palette<span class="op">=</span><span class="fu"><a href="reference/IPCC_palette.html">IPCC_palette</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"pr"</span>, divergent <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, legend_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">550</span>,<span class="fl">550</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr>
<th align="center"><img src="https://github.com/Risk-Team/CAVAanalytics/assets/40058235/80a4a686-3192-4226-9535-6cff58192c96" alt="Rplot01"></th>
</tr></thead>
<tbody><tr>
<td align="center"><em>Projected change in total annual precipitation compared to the 1990-2000 baseline period in Sudan</em></td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="installation-options">Installation options<a class="anchor" aria-label="anchor" href="#installation-options"></a>
</h3>
<p>Depending on your preferences and setup, CAVAanalytics can be installed in the following ways:</p>
<div class="section level4">
<h4 id="id_1-locally">1) Locally<a class="anchor" aria-label="anchor" href="#id_1-locally"></a>
</h4>
<p><strong>If you are new to climate4R</strong>, You need to first install <strong>rJava</strong>. This installation can be problematic. Follow the instructions below</p>
<p><strong>Windows</strong></p>
<p><a href="https://cimentadaj.github.io/blog/2018-05-25-installing-rjava-on-windows-10/installing-rjava-on-windows-10/" class="external-link">Installing rJava in Windows</a></p>
<p><strong>Linux and macOS</strong></p>
<p><a href="https://github.com/SantanderMetGroup/loadeR/wiki/Installation" class="external-link">Installing rJava in Linux and macOS</a></p>
<p>If the installation of rJava is successful, you should be able to load the library from Rstudio and you can now installed CAVAanalytics.</p>
<pre><code><span><span class="co"># Step 1: Ensure rJava is installed and working</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"rJava"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rJava"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.rforge.net/rJava/" class="external-link">rJava</a></span><span class="op">)</span>  <span class="co"># Verify no errors here</span></span>
<span></span>
<span><span class="co"># Step 2: Install pak (if not already installed)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"pak"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Step 3: Install all required packages from GitHub using pak</span></span>
<span><span class="va">required_packages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"SantanderMetGroup/loadeR.java"</span>,</span>
<span>  <span class="st">"SantanderMetGroup/climate4R.UDG"</span>,</span>
<span>  <span class="st">"SantanderMetGroup/loadeR"</span>,</span>
<span>  <span class="st">"SantanderMetGroup/transformeR"</span>,</span>
<span>  <span class="st">"SantanderMetGroup/downscaleR"</span>,</span>
<span>  <span class="st">"Risk-Team/CAVAanalytics"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="va">required_packages</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="id_2-docker">2) Docker<a class="anchor" aria-label="anchor" href="#id_2-docker"></a>
</h4>
<p>The Docker image is available at Docker.io, rso9192/cava. This docker image is built on top of <a href="https://davetang.org/muse/2021/04/24/running-rstudio-server-with-docker/" class="external-link">rocker/rstudio</a></p>
<div class="section level5">
<h5 id="linux">Linux<a class="anchor" aria-label="anchor" href="#linux"></a>
</h5>
<p>Open the terminal</p>
<pre><code># if not already installed
sudo apt-get install snapd
# if not already installed
sudo snap install docker

sudo docker pull docker.io/rso9192/cava:version3.3.2

sudo docker run --rm \
           -p 8888:8787 \
           -e PASSWORD=password \
           -v /path/to/local/directory:/home \
           rso9192/cava:version3.3.2

</code></pre>
<p>Replace <strong>/path/to/local/directory</strong> with the local directory on your host machine where you want to save your plots or data. For example, you can create a folder on your Desktop called CAVA_results. Then, you would run the above command as:</p>
<pre><code>sudo docker run --rm \
           -p 8888:8787 \
           -e PASSWORD=password \
           -v /home/Desktop/CAVA_results:/home \
           rso9192/cava:version3.3.2</code></pre>
<p>Now open your favorite browser and type <strong><a href="http://localhost:8888/" class="external-link uri">http://localhost:8888/</a></strong>. You should see a login page: enter the <strong>username “rstudio”</strong> and <strong>password “password”</strong> to login and that’s it! You can now use CAVAanalytics through Rstudio server.</p>
</div>
<div class="section level5">
<h5 id="windows">Windows<a class="anchor" aria-label="anchor" href="#windows"></a>
</h5>
<p>If you are using Windows, you can install <a href="https://docs.docker.com/desktop/install/windows-install/" class="external-link">Docker Desktop</a> first. Note that Docker Desktop would require the installation of WSL (Windows Subsystem for Linux). To do that, open a Command Prompt (as administrator) and run</p>
<pre><code><span><span class="va">wsl</span> <span class="op">-</span><span class="op">-</span><span class="va">install</span></span></code></pre>
<p>This will instal the Windows Subsystem for Linux in your computer. Then <strong>start the Docker app</strong> and open an ubuntu terminal and run</p>
<pre><code>sudo docker pull docker.io/rso9192/cava:version3.3.2
# ignore the messages about login</code></pre>
<p>Now run your image as below. Remember to replace <strong>/path/to/local/directory</strong> with the local directory on your host machine where you want to save your plots or data. For example, you can create a folder on your Desktop called CAVA_results. Then, you could run the above command as:</p>
<pre><code>sudo docker run --rm \
           -p 8888:8787 \
           -e PASSWORD=password \
           -v /mnt/c/Users/my_username/Desktop/CAVA_results:/home \
           rso9192/cava:version3.3.2</code></pre>
<p>Now open your favorite browser and type <strong><a href="http://localhost:8888/" class="external-link uri">http://localhost:8888/</a></strong>. You should see a login page: enter the <strong>username “rstudio”</strong> and <strong>password “password”</strong> to login and that’s it! You can now use CAVAanalytics through Rstudio server.</p>
</div>
<div class="section level5">
<h5 id="mac">Mac<a class="anchor" aria-label="anchor" href="#mac"></a>
</h5>
<p>If you are using a Mac, you first need to install <a href="https://docs.docker.com/desktop/install/mac-install/" class="external-link">Docker desktop for Mac</a>.</p>
<p>Then open a terminal and while Docker Desktop is open, run:</p>
<pre><code>sudo docker pull docker.io/rso9192/cava:version3.3.2</code></pre>
<p>At this point, you can run the Docker image with the below comand.</p>
<pre><code>sudo docker run --rm \
           -p 8888:8787 \
           -e PASSWORD=password \
           -v /path/to/local/directory:/home \
           rso9192/cava:version3.3.2</code></pre>
<p>Remember to replace <strong>/path/to/local/directory</strong> with the local directory on your host machine where you want to save your plots or data. Now open your favorite browser and type <strong><a href="http://localhost:8888/" class="external-link uri">http://localhost:8888/</a></strong>. You should see a login page: enter the <strong>username “rstudio”</strong> and <strong>password “password”</strong> to login and that’s it! You can now use CAVAanalytics through Rstudio server.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="python">Python<a class="anchor" aria-label="anchor" href="#python"></a>
</h3>
<p><strong>Firstly, why Python?</strong></p>
<p>While CAVAanalytics was developed using R packages like <code>climate4R</code> and <code>tidyverse</code> to prioritize result visualization, R lacks the computational efficiency of Python, particularly for handling large climate datasets. Python supports out-of-memory parallel computation for arrays through the integration of<code>xarray</code> and <code>dask</code>, a feature absent in R. Consequently, CAVAanalytics relies heavily on in-memory (RAM) processing, which limits its ability to efficiently analyze large-scale geographical areas, such as entire CORDEX domains. This limitation arises because such analyses demand substantial RAM resources. However, CAVAanalytics was primarily designed for country-level assessments rather than extensive climate data analyses. (<a href="https://risk-team.github.io/CAVAanalytics/reference/index.html">check out the memory-efficient functions available from CAVAanalytics though</a>)</p>
<p>For users interested in accessing gridded climate projections more efficiently, <a href="https://github.com/Risk-Team/cavapy" class="external-link">cavapy</a> is recommended. Cavapy focuses on data retrieval in Python, whereas CAVAanalytics offers a broader suite of tools for processing and visualization.</p>
</div>
<div class="section level3">
<h3 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h3>
<p>If you would like to contribute to this project, you are welcome to fork this repository and submit your contribution. If you liked CAVAanalytics, please remember to <a href="https://github.com/Risk-Team/CAVAanalytics/stargazers" class="external-link">add a star</a>!</p>
</div>
<div class="section level3">
<h3 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a>
</h3>
<p>You can report issues <a href="https://github.com/Risk-Team/CAVAanalytics/issues" class="external-link">here</a></p>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing CAVAanalytics</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Riccardo Soldan <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2583-5840" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Rodrigo Manzanas <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-0001-3448" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Ana Casanueva <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Riccardo Soldan, Rodrigo Manzanas, Ana Casanueva.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
